# TodoDJS Record Pool Upload Structure

## ğŸ“¦ Upload Process Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ADMIN UPLOADS ZIP FILE                       â”‚
â”‚                    (Album with MP3 tracks)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  1. ZIP FILE VALIDATION                          â”‚
â”‚  â€¢ Check file type (.zip)                                        â”‚
â”‚  â€¢ Validate source selection                                     â”‚
â”‚  â€¢ Check file size                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              2. EXTRACT ZIP FILE (Recursive)                     â”‚
â”‚                                                                   â”‚
â”‚  Main ZIP                                                         â”‚
â”‚  â”œâ”€â”€ cover.jpg (optional)                                        â”‚
â”‚  â”œâ”€â”€ track1.mp3                                                  â”‚
â”‚  â”œâ”€â”€ track2.mp3                                                  â”‚
â”‚  â””â”€â”€ nested.zip (if exists)                                      â”‚
â”‚      â”œâ”€â”€ track3.mp3                                              â”‚
â”‚      â””â”€â”€ track4.mp3                                              â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Extracts all .zip files recursively                           â”‚
â”‚  â€¢ Finds all .mp3 files in any depth                             â”‚
â”‚  â€¢ Extracts cover art (jpg/png)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              3. PARSE MP3 METADATA (ID3 Tags)                    â”‚
â”‚                                                                   â”‚
â”‚  For each MP3 file:                                              â”‚
â”‚  â”œâ”€â”€ Title                                                       â”‚
â”‚  â”œâ”€â”€ Artist                                                      â”‚
â”‚  â”œâ”€â”€ Featured Artist                                             â”‚
â”‚  â”œâ”€â”€ BPM (Beats Per Minute)                                      â”‚
â”‚  â”œâ”€â”€ Genre                                                       â”‚
â”‚  â”œâ”€â”€ Duration (seconds)                                          â”‚
â”‚  â”œâ”€â”€ File size                                                   â”‚
â”‚  â””â”€â”€ Track number                                                â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Uses music-metadata library                                   â”‚
â”‚  â€¢ Fallback to filename if metadata missing                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                4. CREATE ALBUM RECORD                            â”‚
â”‚                                                                   â”‚
â”‚  Album {                                                         â”‚
â”‚    name: "Album Name"                                            â”‚
â”‚    sourceId: Source._id                                          â”‚
â”‚    year: 2026                                                    â”‚
â”‚    coverArt: "https://wasabi.../cover.jpg"                       â”‚
â”‚    trackCount: 10                                                â”‚
â”‚    totalSize: 125000000 (bytes)                                  â”‚
â”‚    zipUrl: "https://wasabi.../album.zip"                         â”‚
â”‚    zipKey: "source-name/album-name/album.zip"                    â”‚
â”‚  }                                                               â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Saved to MongoDB                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           5. UPLOAD TO WASABI S3 (Parallel)                      â”‚
â”‚                                                                   â”‚
â”‚  For each file:                                                  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Original ZIP File                       â”‚                    â”‚
â”‚  â”‚  Key: source/album/album.zip             â”‚                    â”‚
â”‚  â”‚  â†’ For bulk downloads                    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Cover Art (if exists)                   â”‚                    â”‚
â”‚  â”‚  Key: source/album/cover.jpg             â”‚                    â”‚
â”‚  â”‚  â†’ For album display                     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Track 1.mp3                             â”‚                    â”‚
â”‚  â”‚  Key: source/album/track1.mp3            â”‚                    â”‚
â”‚  â”‚  â†’ For streaming/download                â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Track 2.mp3                             â”‚                    â”‚
â”‚  â”‚  Key: source/album/track2.mp3            â”‚                    â”‚
â”‚  â”‚  â†’ For streaming/download                â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                   â”‚
â”‚  ... (all tracks)                                                â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Each file gets unique S3 key                                  â”‚
â”‚  â€¢ Returns signed URLs                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              6. CREATE TRACK RECORDS                             â”‚
â”‚                                                                   â”‚
â”‚  For each MP3:                                                   â”‚
â”‚                                                                   â”‚
â”‚  Track {                                                         â”‚
â”‚    sourceId: Source._id                                          â”‚
â”‚    albumId: Album._id                                            â”‚
â”‚    title: "Track Title"                                          â”‚
â”‚    artist: "Artist Name"                                         â”‚
â”‚    featuredArtist: "Featured Artist"                             â”‚
â”‚    genre: "House"                                                â”‚
â”‚    bpm: 128                                                      â”‚
â”‚    pool: "Source Name"                                           â”‚
â”‚    coverArt: "https://wasabi.../cover.jpg"                       â”‚
â”‚    audioFile: {                                                  â”‚
â”‚      url: "https://wasabi.../track.mp3"                          â”‚
â”‚      key: "source/album/track.mp3"                               â”‚
â”‚      format: "MP3"                                               â”‚
â”‚      size: 8500000                                               â”‚
â”‚      duration: 245                                               â”‚
â”‚    }                                                             â”‚
â”‚    versionType: "Original Mix"                                   â”‚
â”‚    status: "published"                                           â”‚
â”‚  }                                                               â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Saved to MongoDB                                              â”‚
â”‚  â€¢ Linked to Album and Source                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              7. UPDATE SOURCE STATISTICS                         â”‚
â”‚                                                                   â”‚
â”‚  Source.totalAlbums += 1                                         â”‚
â”‚  Source.totalTracks += trackCount                                â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Saved to MongoDB                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    8. DISPLAY IN UI                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  Album Card                           â”‚                       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                       â”‚
â”‚  â”‚  â”‚                â”‚                   â”‚                       â”‚
â”‚  â”‚  â”‚  Cover Art     â”‚                   â”‚                       â”‚
â”‚  â”‚  â”‚                â”‚                   â”‚                       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚                       â”‚
â”‚  â”‚  Album Name                           â”‚                       â”‚
â”‚  â”‚  Source â€¢ Year                        â”‚                       â”‚
â”‚  â”‚  ğŸµ 10 tracks â€¢ 125 MB                â”‚                       â”‚
â”‚  â”‚  ğŸ“¥ 0 downloads                        â”‚                       â”‚
â”‚  â”‚                                        â”‚                       â”‚
â”‚  â”‚  [Manage] [Delete]                    â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                   â”‚
â”‚  Click "Manage" â†’                                                â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  Track List Modal                     â”‚                       â”‚
â”‚  â”‚  â–¶ 01 Track Title - Artist   128 BPM  â”‚                       â”‚
â”‚  â”‚  â–¶ 02 Track Title - Artist   130 BPM  â”‚                       â”‚
â”‚  â”‚  â–¶ 03 Track Title - Artist   125 BPM  â”‚                       â”‚
â”‚  â”‚  ...                                   â”‚                       â”‚
â”‚  â”‚                                        â”‚                       â”‚
â”‚  â”‚  [Edit] [Delete] buttons per track    â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—‚ï¸ File Structure in Wasabi S3

```
tododj/  (bucket)
â”‚
â”œâ”€â”€ Source-Name-2026/
â”‚   â”‚
â”‚   â”œâ”€â”€ Album-Name-1/
â”‚   â”‚   â”œâ”€â”€ album.zip              (original ZIP for bulk download)
â”‚   â”‚   â”œâ”€â”€ cover.jpg              (album cover art)
â”‚   â”‚   â”œâ”€â”€ 01-track-name.mp3      (individual track)
â”‚   â”‚   â”œâ”€â”€ 02-track-name.mp3
â”‚   â”‚   â””â”€â”€ 03-track-name.mp3
â”‚   â”‚
â”‚   â””â”€â”€ Album-Name-2/
â”‚       â”œâ”€â”€ album.zip
â”‚       â”œâ”€â”€ cover.jpg
â”‚       â”œâ”€â”€ 01-track-name.mp3
â”‚       â””â”€â”€ 02-track-name.mp3
â”‚
â””â”€â”€ Another-Source-2026/
    â””â”€â”€ Album-Name-3/
        â”œâ”€â”€ album.zip
        â”œâ”€â”€ cover.jpg
        â””â”€â”€ 01-track-name.mp3
```

## ğŸ“Š Database Structure

```
MongoDB Collections:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Sources      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id             â”‚
â”‚ name            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ year            â”‚          â”‚
â”‚ platform        â”‚          â”‚
â”‚ thumbnail       â”‚          â”‚
â”‚ totalAlbums     â”‚          â”‚
â”‚ totalTracks     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                             â”‚
                             â”‚ sourceId
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    Albums       â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚ _id             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sourceId        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚ name            â”‚                    â”‚
â”‚ year            â”‚                    â”‚
â”‚ coverArt        â”‚                    â”‚
â”‚ trackCount      â”‚                    â”‚
â”‚ totalSize       â”‚                    â”‚
â”‚ zipUrl          â”‚                    â”‚
â”‚ zipKey          â”‚                    â”‚
â”‚ totalDownloads  â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
                                       â”‚ albumId
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚     Tracks      â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
â”‚ _id             â”‚                    â”‚
â”‚ sourceId        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ albumId         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ title           â”‚
â”‚ artist          â”‚
â”‚ featuredArtist  â”‚
â”‚ genre           â”‚
â”‚ bpm             â”‚
â”‚ tonality        â”‚
â”‚ pool            â”‚
â”‚ coverArt        â”‚
â”‚ audioFile       â”‚
â”‚   â”œâ”€â”€ url       â”‚  (Wasabi S3 URL)
â”‚   â”œâ”€â”€ key       â”‚  (S3 object key)
â”‚   â”œâ”€â”€ format    â”‚  (MP3/WAV/FLAC)
â”‚   â”œâ”€â”€ size      â”‚  (bytes)
â”‚   â””â”€â”€ duration  â”‚  (seconds)
â”‚ versionType     â”‚
â”‚ status          â”‚
â”‚ downloads       â”‚
â”‚ plays           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Playback Flow

```
User clicks Play button on track
         â”‚
         â–¼
Frontend requests playback URL
GET /api/tracks/:id/playback
         â”‚
         â–¼
Backend generates signed URL from Wasabi
(Valid for 1 hour)
         â”‚
         â–¼
Frontend receives streaming URL
         â”‚
         â–¼
HTML5 Audio element loads MP3
         â”‚
         â–¼
Track plays with controls:
â€¢ Play/Pause
â€¢ Progress bar
â€¢ Seek
â€¢ Time display
```

## ğŸ” Security

- **Authentication**: JWT tokens required for all admin operations
- **Authorization**: Only admins can upload/edit/delete
- **Signed URLs**: Temporary access to S3 files (1 hour expiry)
- **CORS**: Restricted to localhost and browser preview ports
- **File Validation**: Only .zip and .mp3 files accepted

## âš¡ Performance

- **Parallel Uploads**: All tracks uploaded to S3 simultaneously
- **Streaming**: MP3s streamed directly from Wasabi (no server load)
- **Caching**: Cover art and metadata cached in MongoDB
- **Pagination**: Large track lists can be paginated (future)
